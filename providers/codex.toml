# Codex CLI provider definition
# Signalâ†’Evidence mapping for state estimation

[detection]
agent_type = "codex"
cmd_tokens = ["codex"]

# --- Poller Signals ---

[[signals]]
pattern = ["approval-requested"]
activity = "WaitingApproval"
weight = 0.97
confidence = 0.95

[[signals]]
pattern = ["input-requested"]
activity = "WaitingInput"
weight = 0.94
confidence = 0.92

[[signals]]
pattern = ["error", "failed", "panic", "exception"]
activity = "Error"
weight = 1.00
confidence = 0.95

[[signals]]
pattern = ["running", "wrapper_start"]
activity = "Running"
weight = 0.92
confidence = 0.88

[[signals]]
pattern = ["idle", "completed", "done"]
activity = "Idle"
weight = 0.88
confidence = 0.86

# --- API Event Mappings ---

[[api_events]]
event = "turn/started"
activity = "Running"

[[api_events]]
event = "turn/completed"
activity = "Idle"

[[api_events]]
event = "item/commandExecution/requestApproval"
activity = "WaitingApproval"

[[api_events]]
event = "item/fileChange/requestApproval"
activity = "WaitingApproval"

[[api_events]]
event = "turn/failed"
activity = "Error"
