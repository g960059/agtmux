# AGTMUX Handover

Date: 2026-02-13
Owner: codex-agent

## 1. Current State

- Spec was updated to `v0.5`.
- Updated file:
  - `docs/agtmux-spec.md`
- Current git status (repo local):
  - `docs/` is untracked (not committed yet).

## 2. What Was Reviewed

Re-review was executed with Codex in parallel by viewpoints:

- architecture: `tmp/agtmux_codex_review_arch_v2.md`
- ux: `tmp/agtmux_codex_review_ux_v2.md`
- reliability: `tmp/agtmux_codex_review_reliability_v2.md`
- plan: `tmp/agtmux_codex_review_plan_v2.md`
- value/priority: `tmp/agtmux_codex_review_value_v2.md`

## 3. Adopted Changes (Reflected in v0.5)

1. Action safety (fail-closed by default) via server-side `action_snapshot`.
2. Canonical action reference grammar (`runtime:<id>`, `pane:<target>/<session>/<window>/<pane>`).
3. Deterministic event ordering + dedupe algorithm section.
4. Runtime binding rule for events without `runtime_id`.
5. Data model reinforcement:
   - `runtime_source_cursors`
   - `action_snapshots`
6. CLI/output contract reinforcement:
   - `watch --format jsonl`
   - per-scope identity schema requirements.
7. Security requirement reinforcement:
   - no plaintext secret connection data in DB (`connection_ref` only).

## 4. Deferred / Not Adopted Now

1. Mandatory external action token for every action invocation.
   - Deferred to avoid early complexity; current design uses daemon snapshot validation.
2. Shrinking MVP to host-only.
   - Deferred to keep cross-target direction.
3. Moving adapter expansion after macOS app.
   - Deferred; current phase order retained.

## 5. Open Decisions (Still in Spec)

1. If Gemini gets stronger native hooks, should it become default ingestion path?
2. In very large environments, should default view switch from `--all-targets` to current-target?

## 6. Recommended Next Step

1. Review `docs/agtmux-spec.md` v0.5 and approve direction.
2. Commit the spec file.
3. Start implementation from Phase 0 with:
   - ordering/dedupe replay test harness,
   - action snapshot guard E2E tests,
   - watch jsonl schema tests.

